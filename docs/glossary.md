# プロジェクト用語集 (Glossary)

## 概要

このドキュメントは、OneQ-OneAプロジェクトで使用される用語の定義を管理します。

**更新日**: 2026-01-08

---

## ドメイン用語

プロジェクト固有のビジネス概念や機能に関する用語。

### 連続学習プレイヤー (Continuous Player)

**定義**: 動画→問題→次の動画を途切れなく再生する学習画面

**説明**:
ユーザーが学習コンテンツを連続的に消費できるよう設計された画面。TikTokのような没入感を提供し、スワイプ操作で次のコンテンツへ進む。動画終了後の自動遷移機能も備える。

**関連用語**: [学習セッション](#学習セッション-learning-session)、[自動遷移](#自動遷移-auto-transition)

**使用例**:
- 「連続学習プレイヤーで古代史を学習する」
- 「スワイプで次のコンテンツへ進む」

**実装箇所**: `src/pages/VerticalPlayerPage.tsx`

**英語表記**: Continuous Player

### 学習セッション (Learning Session)

**定義**: ユーザーが開始から完了（または中断）までに行う一連の学習単位

**説明**:
学習条件に基づいて生成されるコンテンツの集合。動画と問題が設定に従って配置される。途中中断しても再開位置が記録される。

**関連用語**: [学習セット](#学習セット-learning-set)、[セッションタイプ](#セッションタイプ-session-type)

**使用例**:
- 「今日の学習セッションを開始する」
- 「前回のセッションを続きから再開する」

**英語表記**: Learning Session

### 学習セット (Learning Set)

**定義**: 1回の学習で消費するコンテンツ（動画・問題）の集合

**説明**:
ユーザー設定に基づいて生成される。「動画5本」のように設定可能。Phase 2以降では出題順（順番/ランダム）も制御できる。

**関連用語**: [学習セッション](#学習セッション-learning-session)、[出題順](#出題順-order-mode)

**使用例**:
- 「今日の学習セットは動画5本」
- 「ランダムセットで復習する」

**英語表記**: Learning Set

### 苦手問題 (Weak Question)

**定義**: ユーザーの正答率が低い問題（Phase 3で実装）

**説明**:
以下の条件のいずれかを満たす問題:
1. 正答率が閾値（デフォルト70%）未満
2. 直近で不正解がある

**関連用語**: [苦手判定](#苦手判定-weak-detection)、[正答率](#正答率-accuracy-rate)

**使用例**:
- 「苦手問題だけを繰り返し学習する」
- 「苦手だけモードで弱点を潰す」

**英語表記**: Weak Question

**導入フェーズ**: Phase 3

### テスト範囲 (Test Range)

**定義**: 定期テストなど特定の試験に向けて指定された学習範囲（Phase 4で実装）

**説明**:
学年、時代（単元）、テーマを選択式で指定。指定した範囲はプリセットとして保存可能（例：期末テスト範囲）。範囲内での周回学習、完成度表示に対応。

**関連用語**: [範囲プリセット](#範囲プリセット-range-preset)

**使用例**:
- 「期末テスト範囲を設定する」
- 「テスト範囲内で苦手優先モードで学習する」

**英語表記**: Test Range

**導入フェーズ**: Phase 4

### 範囲プリセット (Range Preset)

**定義**: 保存されたテスト範囲の設定（Phase 4で実装）

**説明**:
ユーザーが名前を付けて保存したテスト範囲。複数の単元タグを含む。繰り返し使用でき、定期テスト対策に有用。

**関連用語**: [テスト範囲](#テスト範囲-test-range)

**使用例**:
- 「期末テスト範囲のプリセットを作成する」
- 「保存した範囲で学習を開始する」

**英語表記**: Range Preset

**導入フェーズ**: Phase 4

### 自動遷移 (Auto Transition)

**定義**: コンテンツ終了後に自動で次のコンテンツへ移る機能

**説明**:
2種類の自動遷移が設定可能:
1. 動画終了→問題（autoNextVideo）
2. 問題回答→次の動画（autoNextQuiz）

ユーザーが設定でON/OFFを切り替えられる。

**関連用語**: [連続学習プレイヤー](#連続学習プレイヤー-continuous-player)

**使用例**:
- 「自動遷移をONにして流れるように学習する」
- 「じっくり見たいので自動遷移をOFFにする」

**英語表記**: Auto Transition

### 動画 (Video)

**定義**: 学習内容を説明する短い解説動画

**説明**:
各単元に紐づく動画ファイル。ファイル名は`001_jomon.mp4`のように連番とトピック名で構成。タグで時代・テーマを管理。

**関連用語**: [コンテンツ](#コンテンツ-content)

**使用例**:
- 「縄文時代の動画を視聴する」
- 「動画終了後に問題が出題される」

**ファイル形式**: MP4

**保存場所**: `content/movies/`

**英語表記**: Video

### コンテンツ (Content)

**定義**: 学習に使用する動画ファイルとメタデータの総称

**説明**:
`content/` ディレクトリに格納される以下の要素を含む:
- **動画ファイル**: `content/movies/` に教科・時代別で保存
- **メタデータ**: `content/data/` にJSON形式で管理（動画情報、問題データ）

**関連用語**: [動画](#動画-video)

**使用例**:
- 「歴史のコンテンツを読み込む」
- 「新しいコンテンツを追加する」

**英語表記**: Content

**保存場所**: `content/movies/`, `content/data/`

---

## セッションタイプ (Session Type)

学習セッションの種類を示す列挙型。Phase 3以降で拡張。

| タイプ | 意味 | 使用シーン | 導入フェーズ |
|--------|------|-----------|-------------|
| `all` | 全範囲 | 全体的な復習、日常学習 | Phase 1 |
| `random` | ランダム | 気軽な復習 | Phase 2 |
| `weak_only` | 苦手のみ | 弱点克服 | Phase 3 |
| `test_range` | テスト範囲 | 定期テスト対策 | Phase 4 |

---

## 出題順 (Order Mode)

問題の出題順序を制御するモード。Phase 2以降で導入。

| モード | 意味 | 説明 | 導入フェーズ |
|--------|------|------|-------------|
| `sequential` | 順番 | 単元順・教科書順に出題 | Phase 2 |
| `random` | ランダム | 完全ランダムに出題 | Phase 2 |
| `weak_first` | 苦手優先 | 苦手問題を先に出題し、残りをランダム | Phase 3 |

---

## 技術用語

プロジェクトで使用している技術・フレームワーク・ツールに関する用語。

### React

**定義**: JavaScriptでUIを構築するためのライブラリ

**公式サイト**: https://react.dev/

**本プロジェクトでの用途**: Web/PWAアプリのUIライブラリ

**バージョン**: 19.x

**選定理由**:
- コンポーネントベースで再利用性が高い
- エコシステムが充実
- TypeScriptとの統合が優れている

**関連ドキュメント**: [アーキテクチャ設計書](./architecture.md)

### Vite

**定義**: 高速なフロントエンドビルドツール

**公式サイト**: https://vite.dev/

**本プロジェクトでの用途**:
- 開発サーバー（HMR）
- プロダクションビルド
- PWAプラグイン

**バージョン**: 6.x

**選定理由**:
- 高速なHMR（Hot Module Replacement）
- ESM対応
- PWAプラグインで簡単にPWA化可能

**関連ドキュメント**: [アーキテクチャ設計書](./architecture.md)

### Zustand

**定義**: React向けの軽量状態管理ライブラリ

**公式サイト**: https://zustand-demo.pmnd.rs/

**本プロジェクトでの用途**:
Webアプリの状態管理（セッション状態、設定）

**バージョン**: 5.x

**選定理由**:
- 最小限のボイラープレート
- シンプルなAPI
- TypeScript対応が優れている

**実装箇所**: `src/stores/`

### Tailwind CSS

**定義**: ユーティリティファーストのCSSフレームワーク

**公式サイト**: https://tailwindcss.com/

**本プロジェクトでの用途**: UIスタイリング

**バージョン**: 4.x

**選定理由**:
- 高速な開発
- 一貫したデザインシステム
- バンドルサイズの最適化

### Cloudflare Workers

**定義**: Cloudflareのエッジで動作するサーバーレス実行環境

**公式サイト**: https://workers.cloudflare.com/

**本プロジェクトでの用途**: バックエンドAPIのホスティング（Phase 3以降）

**選定理由**:
- エッジ実行で低遅延
- 自動スケーリング
- Cloudflare D1との統合

**導入フェーズ**: Phase 3

### Hono

**定義**: 軽量・高速なWebフレームワーク（Cloudflare Workers対応）

**公式サイト**: https://hono.dev/

**本プロジェクトでの用途**: APIルーティング、ミドルウェア（Phase 3以降）

**バージョン**: 4.x

**選定理由**:
- Cloudflare Workers向けに最適化
- TypeScript完全対応
- 軽量で高速

**導入フェーズ**: Phase 3

---

## 略語・頭字語

### PRD

**正式名称**: Product Requirements Document

**意味**: プロダクト要求定義書

**本プロジェクトでの使用**: `docs/product-requirements.md`

### MVP

**正式名称**: Minimum Viable Product

**意味**: 最小限の機能を持つ実用可能なプロダクト

**本プロジェクトでの使用**: Phase 1の機能範囲

### PWA

**正式名称**: Progressive Web App

**意味**: Webアプリをネイティブアプリのように動作させる技術

**本プロジェクトでの使用**: ホーム画面追加、フルスクリーン表示対応

### CDN

**正式名称**: Content Delivery Network

**意味**: コンテンツ配信ネットワーク

**本プロジェクトでの使用**: 動画配信（将来）

---

## アーキテクチャ用語

### レイヤードアーキテクチャ (Layered Architecture)

**定義**: システムを役割ごとに複数の層に分割し、上位層から下位層への一方向の依存関係を持たせる設計パターン

**本プロジェクトでの適用**:

```
┌─────────────────────────────────────┐
│   Presentation (pages/, components/)│ ← 画面表示
├─────────────────────────────────────┤
│   Application (stores/, services/)  │ ← ビジネスロジック
├─────────────────────────────────────┤
│   Infrastructure (services/ - Storage)│ ← ストレージ/API
└─────────────────────────────────────┘
```

**依存関係のルール**:
- ✅ Presentation → Application → Infrastructure
- ❌ Infrastructure → Application（禁止）
- ❌ Application → Presentation（禁止）

**関連ドキュメント**: [アーキテクチャ設計書](./architecture.md)

---

## ステータス・状態

### コンテンツ完了状態

セッション内の各コンテンツ（動画・問題）の状態。

| 状態 | 意味 | 遷移条件 |
|------|------|---------|
| 未完了 | まだ視聴/回答していない | 初期状態 |
| 完了 | 視聴/回答済み | 動画再生終了、問題回答後 |

---

## データモデル用語

### LearningLog（学習ログ）

**定義**: ユーザーの問題回答履歴を記録するエンティティ

**主要フィールド**:
- `questionId`: 問題ID
- `result`: 正誤（correct / incorrect）
- `timestamp`: 回答日時

**用途**: 正答率計算、苦手判定（Phase 3）

### SessionContent（セッションコンテンツ）

**定義**: 学習セッション内の個々のコンテンツを表す

**主要フィールド**:
- `type`: 'video' | 'question'
- `contentId`: 動画ID or 問題ID
- `completed`: 完了フラグ

**用途**: セッションの進捗管理

---

## 計算・アルゴリズム

### 苦手判定 (Weak Detection)

**定義**: 問題がユーザーにとって苦手かどうかを判定するアルゴリズム（Phase 3）

**判定条件**（いずれかを満たす場合、苦手と判定）:
1. 正答率が閾値（デフォルト70%）未満
2. 直近で不正解がある

**計算式**:
```typescript
function isWeak(stats: QuestionStats, threshold: number): boolean {
  if (stats.totalAttempts < 3) return false;
  return stats.correctAttempts / stats.totalAttempts * 100 < threshold;
}
```

**導入フェーズ**: Phase 3

### 苦手解除 (Weak Resolution)

**定義**: 苦手と判定された動画が、繰り返し学習により苦手状態から解除されること

**解除条件**:
- 過去にfeedback='bad'（復習ボタン押下）の記録があること
- 最新のbad記録以降、連続N回のnon-badフィードバックがあること
  - non-badフィードバック: null（復習ボタン未押下）、perfect、unsure
  - N = WEAK_RESOLUTION_THRESHOLD（デフォルト: 2回）

**計算式**:
```typescript
// 苦手解除に必要な連続回数
const WEAK_RESOLUTION_THRESHOLD = 2;

function checkWeakResolution(videoId: string, records: LearningRecord[]): boolean {
  // 最新のbad記録以降の連続non-bad回数をカウント
  // 連続回数 >= WEAK_RESOLUTION_THRESHOLD なら解除
}
```

**UX効果**:
- セッション完了時に「苦手から卒業🎓」メッセージを表示
- 達成感を演出し、モチベーション維持に貢献

**導入フェーズ**: Phase 3

### マイルストーン (Milestone)

**定義**: 累計視聴本数に基づく達成目標

**マイルストーン一覧**:
| 本数 | ラベル | 絵文字 |
|-----|-------|--------|
| 10 | 10本達成 | 🌟 |
| 25 | 25本達成 | ⭐ |
| 50 | 50本達成 | 🏅 |
| 100 | 100本達成 | 🏆 |
| 200 | 200本達成 | 👑 |

**達成判定**:
- セッション開始時の累計視聴本数を記録
- セッション終了時に現在の累計視聴本数と比較
- 開始時 < マイルストーン値 <= 終了時 なら達成

**UX効果**:
- セッション完了時に「マイルストーン達成！🏆」メッセージを表示
- 継続的な学習のモチベーション維持

**導入フェーズ**: Phase 3

### 正答率 (Accuracy Rate)

**定義**: 問題に対する正解の割合

**計算式**:
```
正答率(%) = (正解数 / 総回答数) × 100
```

**例**:
- 10回回答、7回正解 → 正答率70%
- 5回回答、5回正解 → 正答率100%

---

## 段階実装（フェーズ）

### Phase 0

**名称**: コンテンツ投入準備

**目的**: 動くものを最速で確認するためのデータ最小形

**内容**:
- 動画10本程度（テスト用）
- 各動画に紐づく問題（各1問でも可）
- メタ情報：動画ID、タイトル、タグ

### Phase 1 (MVP)

**名称**: 連続学習の核だけ

**目的**: スマホで"次へ次へ"と学べる最小体験を成立させる

**機能**:
- ホーム（2ボタン：連続学習をはじめる、設定）
- 連続学習プレイヤー（動画→問題→次の動画）
- 問題UI（答えを見る→正解/不正解）
- 設定（動画本数、自動遷移ON/OFF）

### Phase 2

**名称**: カスタマイズ学習

**目的**: ユーザーが学習量・出題頻度を自分に合わせられる

**機能**:
- 動画本数設定
- 「動画N本ごとに問題M問」設定
- 出題順（順番/ランダム）

### Phase 3

**名称**: 苦手だけ反復

**目的**: 点数に直結する"弱点潰し"を成立させる

**機能**:
- 苦手判定
- 苦手だけモード
- 苦手比率設定
- 苦手解除通知（連続N回の復習で苦手から卒業）✅ 2026-01-24実装
- マイルストーン達成通知 ✅ 2026-01-24実装
- 章完了通知 ✅ 2026-01-24実装

### Phase 4

**名称**: テスト範囲指定＋周回

**目的**: 定期テスト運用を完成させる

**機能**:
- 範囲指定（時代/単元選択）
- 範囲プリセット保存
- 範囲内周回
- 範囲内進捗表示

---

## 索引

### あ行
- [自動遷移](#自動遷移-auto-transition) - ドメイン用語

### か行
- [学習セッション](#学習セッション-learning-session) - ドメイン用語
- [学習セット](#学習セット-learning-set) - ドメイン用語
- [コンテンツ](#コンテンツ-content) - ドメイン用語

### さ行
- [苦手解除](#苦手解除-weak-resolution) - 計算・アルゴリズム
- [苦手問題](#苦手問題-weak-question) - ドメイン用語
- [正答率](#正答率-accuracy-rate) - 計算・アルゴリズム
- [セッションタイプ](#セッションタイプ-session-type) - ドメイン用語

### ま行
- [マイルストーン](#マイルストーン-milestone) - 計算・アルゴリズム

### た行
- [テスト範囲](#テスト範囲-test-range) - ドメイン用語
- [動画](#動画-video) - ドメイン用語

### は行
- [範囲プリセット](#範囲プリセット-range-preset) - ドメイン用語

### ら行
- [連続学習プレイヤー](#連続学習プレイヤー-continuous-player) - ドメイン用語
- [レイヤードアーキテクチャ](#レイヤードアーキテクチャ-layered-architecture) - アーキテクチャ用語

### A-Z
- [CDN](#cdn) - 略語
- [Cloudflare Workers](#cloudflare-workers) - 技術用語
- [Hono](#hono) - 技術用語
- [MVP](#mvp) - 略語
- [PRD](#prd) - 略語
- [PWA](#pwa) - 略語
- [React](#react) - 技術用語
- [Tailwind CSS](#tailwind-css) - 技術用語
- [Vite](#vite) - 技術用語
- [Zustand](#zustand) - 技術用語
