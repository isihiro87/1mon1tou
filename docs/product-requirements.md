# プロダクト要求定義書 (Product Requirements Document)

## プロダクト概要

### 名称
**OneQ-OneA** - 中学生向け歴史一問一答動画学習サービス

### 提供形態
- **Webサイト（スマホ最適化）＋ PWA対応（ホーム画面追加）**
- 対応端末・ブラウザ:
  - iOS: Safari（最新〜概ね2世代）
  - Android: Chrome（最新〜概ね2世代）

### プロダクトコンセプト
- **次々と進む没入体験**: 動画→問題→次の動画を途切れなく連続再生し、スワイプだけで学習を進められる
- **短時間・反復学習**: 「連続で進む」「苦手を繰り返す」「テスト範囲を周回する」を核に効率学習
- **段階実装**: 最小機能（MVP）から実装し、動作確認しながら段階的に拡張

### プロダクトビジョン
中学生が歴史の暗記学習を「面倒なもの」から「サクサク進められるもの」に変える。
短い動画と一問一答を組み合わせ、TikTokのように次々とコンテンツを消費する感覚で自然に学習が進む。
苦手な問題は自動で繰り返し出題され、テスト前には範囲を絞って効率的に反復できる。
スマホに最適化されたWebアプリで、通学時間やスキマ時間を有効活用できる学習体験を提供する。

### 目的
- 既存の「歴史一問一答動画（約100本）」を使い、**スマホで短時間・反復学習**できるWebサービスを提供する
- 「連続で進む」「苦手を繰り返す」「テスト範囲を周回する」を核に、定期テスト／入試の暗記効率を最大化する
- 最小機能（MVP）から実装し、動作確認しながら段階的に拡張する

## ターゲットユーザー

### プライマリーペルソナ: 佐藤ゆうき（14歳、中学2年生）
- 部活（バスケ部）と塾で忙しく、まとまった勉強時間が取りにくい
- スマホは毎日3時間以上使用、TikTokやYouTubeが好き
- 歴史は暗記科目で苦手意識がある、特に年号と人物名の関連付けが難しい
- 「短い時間でサクサク進めたい」「面倒なことはしたくない」
- **1日の典型的なワークフロー**:
  - 通学電車（片道20分）でスマホを見る
  - 塾の合間の休憩時間（10分程度）
  - 寝る前のスマホタイム（30分程度）

### 対象ユーザー
- **中学1〜3年生（本人のみ）**

## UX方針（スマホ・お手軽最優先）

- 1タップで学習開始できる導線
- 1回3〜10分で完結
- 文字入力は極力なし（範囲指定も選択式）
- 連続学習で止まらない（スワイプ＋自動遷移）

## 成功指標(KPI)

### プライマリーKPI
- **週次アクティブユーザー(WAU)**: 1,000人（リリース3ヶ月後）
- **1セッションあたりの学習継続時間**: 平均5分以上
- **週間学習セッション数**: ユーザーあたり平均5回以上

### セカンダリーKPI
- **問題正答率の向上**: ユーザーの平均正答率が1ヶ月で10%向上
- **苦手問題の克服率**: 苦手フラグ付き問題の50%が1ヶ月以内に正答率70%以上に到達
- **継続率**: 7日継続率40%以上、30日継続率20%以上

---

## 段階実装（マイルストーン）

最小→拡張の順に、必ず「動作確認できる単位」で区切る。

---

### Phase 0：コンテンツ投入の最小要件（準備）

**目的：動くものを最速で確認するためのデータ最小形**

**準備内容**:
- 動画10本程度（テスト用）
- 各動画に紐づく問題（各1問でも可）
- メタ情報：動画ID、タイトル、単元タグ（時代）だけで開始可

---

### Phase 1（MVP）：連続学習の核だけ

**目的：スマホで"次へ次へ"と学べる最小体験を成立させる**

#### 機能要件（Phase 1）

**1. ホーム**
- ボタンは2つだけ
  - 「連続学習をはじめる」
  - 「設定」

**2. 連続学習プレイヤー（単一ルート）**
- 動画 →（終了検知）→ 問題 → 次の動画 … を繰り返す
- 操作
  - 左スワイプ：次へ
  - 右スワイプ：前へ（直前のみ）
- 自動遷移（初期値ON）
  - 動画終了→問題
  - 問題完了→次動画

**3. 問題UI（最小）**
- 「答えを見る」→「正解 / 不正解」2択
- 正誤ログを保存（端末内でOK）

**4. ユーザー設定（最小）**
- 1セットの動画本数（例：3/5/10）
- 自動遷移ON/OFF

#### 受け入れ基準（Phase 1）
- [ ] ホーム→1タップで連続学習開始
- [ ] 動画が終わると（ON時）自動で問題へ
- [ ] 問題に正誤を付けたら（ON時）次の動画へ
- [ ] スワイプでストレスなく次へ進む
- [ ] 学習中断→再開で続きから戻れる（簡易で可：最後の位置だけ）

**優先度**: P0(必須)

---

### Phase 2：カスタマイズ学習（学習セット生成）

**目的：ユーザーが学習量・出題頻度を自分に合わせられる**

#### 機能要件（Phase 2）

**1. 学習セットのカスタマイズ**
- 動画本数：スライダー/3択
- 「動画N本ごとに問題M問」設定
- 出題順：順番 / ランダム

**2. セット生成ロジック**
- 設定に基づき、今回のプレイリスト（動画/問題）を生成して連続再生

#### 受け入れ基準（Phase 2）
- [ ] 設定を変えると、実際の出題頻度と動画本数が変わる
- [ ] ランダムを選ぶとランダム順になる（同一セット内の重複は避ける）

**優先度**: P0(必須)

---

### Phase 3：苦手だけ反復

**目的：点数に直結する"弱点潰し"を成立させる**

#### 機能要件（Phase 3）

**1. 苦手判定**
- 初期：正答率が閾値未満（例：70%未満）
- または「直近で不正解がある」でも可（実装簡易優先）

**2. 苦手だけモード**
- ホームに追加
  - 「苦手だけ」
- 出題は苦手問題を優先（苦手が尽きたら終了 or 通常へ切替）

**3. 苦手比率（任意）**
- 苦手100% / 苦手7：通常3 など（設定で選択）

#### 受け入れ基準（Phase 3）
- [ ] 苦手だけを選ぶと苦手問題中心で出る
- [ ] 正解が続くと苦手から外れる（ルールは簡易で可）

**優先度**: P0(必須)

---

### Phase 4：テスト範囲指定＋周回（固定/ランダム）

**目的：定期テスト運用を完成させる**

#### 機能要件（Phase 4）

**1. 範囲指定（入力なし）**
- 学年（任意）／時代（単元）複数選択／テーマ（任意）
- 範囲プリセット保存（例：学年末テスト）

**2. 範囲内周回**
- 「ひたすら繰り返す」
- 「範囲内ランダム」
- 「範囲内 苦手優先＋残りランダム」

**3. 範囲内進捗**
- 完成度%（範囲内）
- 苦手残数
- 周回数

#### 受け入れ基準（Phase 4）
- [ ] 範囲指定後、その範囲内だけが提示され続ける
- [ ] ランダム／固定順が選べる
- [ ] 周回でき、達成度が更新される

**優先度**: P0(必須)

---

## 画面要件（最終形）

- ホーム（学習開始系ボタン）
- 連続学習プレイヤー
- 範囲指定（Phase 4）
- 設定（個人カスタマイズ）
- 進捗（簡易）

※ただし **Phase 1はホーム＋プレイヤー＋設定だけ**で開始する

---

## データ要件

### コンテンツデータ（動画・問題）
- videoId, title, tags（時代/テーマ等）
- questionId, videoId, questionText, answerText, (optional) explanation

### 学習ログ（ユーザーごと）
- questionId, result（○/×）, timestamp
- 正答率計算用の集計情報（都度計算 or キャッシュ）

### 設定データ
- autoPlayNextVideo（動画終了後に自動で次へ）
- orderMode（順番/ランダム/スマート）: 範囲選択時に指定
- weakThreshold（苦手閾値）: Phase 3以降
- rangePresets（Phase 4）

**注**: 動画本数は範囲選択画面で直接選択するため、設定には含まない。

### 保存方式（段階的拡張）
- **Phase 1〜2**: 端末内保存（localStorage / IndexedDB）
- **Phase 3〜**: 必要に応じてサーバ保存に拡張可能（要件としては「将来移行できる設計」）

---

## 非機能要件（Web/PWA）

### パフォーマンス
- 画面遷移: 300ms以内（スワイプ操作のレスポンス）
- 動画再生開始: 2秒以内（バッファリング含む）
- 問題表示: 100ms以内
- 初回ロード: 3秒以内

### ユーザビリティ
- スマホで片手操作しやすいUI（タップ領域・縦レイアウト）
- ページ遷移・表示が軽い（学習が途切れない）
- PWA（ホーム画面追加・全画面表示）は可能なら対応（必須はPhase 2以降でも可）
- 中学生が直感的に操作できるUI（文字サイズ、ボタンサイズの配慮）

### 信頼性
- 学習データの損失ゼロ（ローカル保存時は適切なタイミングで保存）
- アプリクラッシュ時の学習進捗復元

### セキュリティ
- 未成年ユーザーのプライバシー保護（最小限の個人情報収集）

### 動画の扱い（要件として固定）
- 動画は「アプリ内で再生できる」こと
- **動画終了を検知できる方式**であること（自動遷移要件のため）
- ※具体方式（YouTube埋め込み／MP4等）は実装側で決定するが、終了イベントが取れない方式は不可

---

## 将来的な機能(Post-MVP)

### 学習リマインダー
学習習慣形成のためのプッシュ通知機能

**優先度**: P1(重要)

### ゲーミフィケーション要素
連続学習日数、バッジ、レベルアップなどのモチベーション機能

**優先度**: P1(重要)

### 動画一覧画面
動画を個別に選択して視聴できる画面

**優先度**: P2(できれば)

### 学習統計・分析
詳細な学習データの可視化、学習パターン分析

**優先度**: P2(できれば)

### 教科展開
- **フェーズ1**: 歴史（中学1-3年の全範囲）
- **フェーズ2**: 地理、公民
- **フェーズ3**: 他の暗記系教科（理科、英単語など）

---

## テスト方針（段階実装に合わせる）

- Phaseごとに「受け入れ基準」を満たすことを確認してから次へ
- 実機（iPhone/Android）で操作確認必須
  - スワイプ感度
  - 自動遷移
  - 戻る・中断復帰

---

## スコープ外（明確化）

明示的にスコープ外とする項目:

- 志望校別最適化
- 外部連携
- サブユーザー（保護者・先生）
- 動画作成・編集
- 高度AI分析（初期は不要）
- マルチプレイ・対戦機能
- SNS共有機能
- ネイティブアプリ（Web/PWAに特化）
